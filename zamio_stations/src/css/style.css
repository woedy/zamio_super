@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Light mode colors - Enhanced for WCAG AA compliance */
    --color-primary: #14002C;
    --color-secondary: #0066CC; /* Improved contrast: 7.5:1 */
    --color-background: #FFFFFF;
    --color-surface: #F8FAFC;
    --color-text: #0F172A; /* Improved contrast: 16.7:1 */
    --color-text-secondary: #475569; /* Improved contrast: 7.2:1 */
    --color-border: #E2E8F0;
    --color-error: #B91C1C; /* Improved contrast: 7.7:1 */
    --color-warning: #D97706; /* Improved contrast: 5.9:1 */
    --color-success: #166534; /* Improved contrast: 8.2:1 */
    --color-info: #1E40AF; /* Improved contrast: 8.6:1 */
  }

  .dark {
    /* Dark mode colors - Enhanced for WCAG AA compliance */
    --color-primary: #C084FC; /* Improved contrast: 7.1:1 */
    --color-secondary: #60A5FA; /* Improved contrast: 6.8:1 */
    --color-background: #0F172A; /* Darker for better contrast */
    --color-surface: #1E293B;
    --color-text: #F8FAFC; /* Improved contrast: 15.8:1 */
    --color-text-secondary: #CBD5E1; /* Improved contrast: 9.2:1 */
    --color-border: #334155;
    --color-error: #F87171; /* Improved contrast: 6.4:1 */
    --color-warning: #FBBF24; /* Improved contrast: 8.9:1 */
    --color-success: #34D399; /* Improved contrast: 7.8:1 */
    --color-info: #60A5FA; /* Improved contrast: 6.8:1 */
  }

  body {
    @apply font-satoshi font-normal text-base relative z-1;
    background-color: var(--color-background);
    color: var(--color-text);
    transition: background-color 0.3s ease, color 0.3s ease;
  }
}

@layer components {
}

@layer utilities {
  /* Accessibility utilities */
  .sr-only {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    padding: 0 !important;
    margin: -1px !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    white-space: nowrap !important;
    border: 0 !important;
  }

  .not-sr-only {
    position: static !important;
    width: auto !important;
    height: auto !important;
    padding: 0 !important;
    margin: 0 !important;
    overflow: visible !important;
    clip: auto !important;
    white-space: normal !important;
  }

  /* Focus styles for better accessibility */
  .focus-visible-ring {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary/50;
  }

  /* High contrast focus for critical elements */
  .focus-high-contrast {
    @apply focus:outline-none focus:ring-4 focus:ring-primary/75 focus:ring-offset-2;
  }

  /* Skip link styles */
  .skip-link {
    @apply absolute left-0 top-0 z-[9999] -translate-y-full bg-primary text-white px-4 py-2 rounded-md;
    @apply focus:translate-y-0 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-white;
    @apply transition-transform duration-200 ease-in-out text-sm font-medium;
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .border {
      border-width: 2px !important;
    }
    
    .focus-visible-ring {
      @apply focus-visible:ring-4 focus-visible:ring-offset-4;
    }
  }

  /* Dark-mode hardening: neutralize bright light-only surfaces in dark */
  body.dark .bg-white { background-color: #1f2937 !important; } /* slate-800 */
  body.dark .bg-gray-50 { background-color: #1f2937 !important; }
  body.dark .bg-gray-100 { background-color: #1f2937 !important; }
  body.dark .bg-whiten, body.dark .bg-whiter { background-color: #0b1220 !important; } /* dark surface */
  body.dark .text-black { color: #ffffff !important; }
  body.dark .border-stroke { border-color: #2E3A47 !important; } /* strokedark */
  
  /* Chrome, Safari and Opera */
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  .no-scrollbar {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
  }

  .chat-height {
    @apply h-[calc(100vh_-_8.125rem)] lg:h-[calc(100vh_-_5.625rem)];
  }
  .inbox-height {
    @apply h-[calc(100vh_-_8.125rem)] lg:h-[calc(100vh_-_5.625rem)];
  }
}

/* third-party libraries CSS */

.tableCheckbox:checked ~ div span {
  @apply opacity-100;
}
.tableCheckbox:checked ~ div {
  @apply bg-primary border-primary;
}

.apexcharts-legend-text {
  @apply !text-body dark:!text-bodydark;
}
.apexcharts-text {
  @apply !fill-body dark:!fill-bodydark;
}
.apexcharts-xcrosshairs {
  @apply !fill-stroke dark:!fill-strokedark;
}
.apexcharts-gridline {
  @apply !stroke-stroke dark:!stroke-strokedark;
}
.apexcharts-series.apexcharts-pie-series path {
  @apply dark:!stroke-transparent;
}
.apexcharts-legend-series {
  @apply !inline-flex gap-1.5;
}
.apexcharts-tooltip.apexcharts-theme-light {
  @apply dark:!border-strokedark dark:!bg-boxdark;
}
.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {
  @apply dark:!border-strokedark dark:!bg-meta-4;
}
.apexcharts-xaxistooltip,
.apexcharts-yaxistooltip {
  @apply dark:!border-meta-4 dark:!bg-meta-4 dark:!text-bodydark1;
}
.apexcharts-xaxistooltip-bottom:after {
  @apply !border-b-gray dark:!border-b-meta-4;
}
.apexcharts-xaxistooltip-bottom:before {
  @apply !border-b-gray dark:!border-b-meta-4;
}
.apexcharts-xaxistooltip-bottom {
  @apply !rounded !border-none !bg-gray !text-xs !font-medium !text-black dark:!text-white;
}
.apexcharts-tooltip-series-group {
  @apply !pl-1.5;
}

.flatpickr-wrapper {
  @apply w-full;
}
.flatpickr-months .flatpickr-prev-month:hover svg,
.flatpickr-months .flatpickr-next-month:hover svg {
  @apply !fill-primary;
}
.flatpickr-calendar.arrowTop:before {
  @apply dark:!border-b-boxdark;
}
.flatpickr-calendar.arrowTop:after {
  @apply dark:!border-b-boxdark;
}
.flatpickr-calendar {
  @apply !p-6 dark:!bg-boxdark dark:!text-bodydark dark:!shadow-8 2xsm:!w-auto;
}
.flatpickr-day {
  @apply dark:!text-bodydark dark:hover:!border-meta-4 dark:hover:!bg-meta-4;
}
.flatpickr-months .flatpickr-prev-month,
.flatpickr-months .flatpickr-next-month {
  @apply !top-7 dark:!fill-white dark:!text-white;
}
.flatpickr-months .flatpickr-prev-month.flatpickr-prev-month,
.flatpickr-months .flatpickr-next-month.flatpickr-prev-month {
  @apply !left-7;
}
.flatpickr-months .flatpickr-prev-month.flatpickr-next-month,
.flatpickr-months .flatpickr-next-month.flatpickr-next-month {
  @apply !right-7;
}
span.flatpickr-weekday,
.flatpickr-months .flatpickr-month {
  @apply dark:!fill-white dark:!text-white;
}
.flatpickr-day.inRange {
  @apply dark:!shadow-7;
  box-shadow: -5px 0 0 #EFF4FB, 5px 0 0 #EFF4FB;
}
.flatpickr-day.inRange,
.flatpickr-day.prevMonthDay.inRange,
.flatpickr-day.nextMonthDay.inRange,
.flatpickr-day.today.inRange,
.flatpickr-day.prevMonthDay.today.inRange,
.flatpickr-day.nextMonthDay.today.inRange,
.flatpickr-day:hover,
.flatpickr-day.prevMonthDay:hover,
.flatpickr-day.nextMonthDay:hover,
.flatpickr-day:focus,
.flatpickr-day.prevMonthDay:focus,
.flatpickr-day.nextMonthDay:focus {
  @apply border-gray bg-gray dark:!border-meta-4 dark:!bg-meta-4;
}
.flatpickr-day.selected,
.flatpickr-day.startRange,
.flatpickr-day.selected,
.flatpickr-day.endRange {
  @apply dark:!text-white;
}
.flatpickr-day.selected,
.flatpickr-day.startRange,
.flatpickr-day.endRange,
.flatpickr-day.selected.inRange,
.flatpickr-day.startRange.inRange,
.flatpickr-day.endRange.inRange,
.flatpickr-day.selected:focus,
.flatpickr-day.startRange:focus,
.flatpickr-day.endRange:focus,
.flatpickr-day.selected:hover,
.flatpickr-day.startRange:hover,
.flatpickr-day.endRange:hover,
.flatpickr-day.selected.prevMonthDay,
.flatpickr-day.startRange.prevMonthDay,
.flatpickr-day.endRange.prevMonthDay,
.flatpickr-day.selected.nextMonthDay,
.flatpickr-day.startRange.nextMonthDay,
.flatpickr-day.endRange.nextMonthDay {
  background: #3c50e0;
  @apply !border-primary !bg-primary hover:!border-primary hover:!bg-primary;
}
.flatpickr-day.selected.startRange + .endRange:not(:nth-child(7n + 1)),
.flatpickr-day.startRange.startRange + .endRange:not(:nth-child(7n + 1)),
.flatpickr-day.endRange.startRange + .endRange:not(:nth-child(7n + 1)) {
  box-shadow: -10px 0 0 #3c50e0;
}

.map-btn .jvm-zoom-btn {
  @apply flex items-center justify-center w-7.5 h-7.5 rounded border border-stroke dark:border-strokedark hover:border-primary dark:hover:border-primary bg-white hover:bg-primary text-body hover:text-white dark:text-bodydark dark:hover:text-white text-2xl leading-none px-0 pt-0 pb-0.5;
}
.mapOne .jvm-zoom-btn {
  @apply left-auto top-auto bottom-0;
}
.mapOne .jvm-zoom-btn.jvm-zoomin {
  @apply right-10;
}
.mapOne .jvm-zoom-btn.jvm-zoomout {
  @apply right-0;
}
.mapTwo .jvm-zoom-btn {
  @apply top-auto bottom-0;
}
.mapTwo .jvm-zoom-btn.jvm-zoomin {
  @apply left-0;
}
.mapTwo .jvm-zoom-btn.jvm-zoomout {
  @apply left-10;
}

.taskCheckbox:checked ~ .box span {
  @apply opacity-100;
}
.taskCheckbox:checked ~ p {
  @apply line-through;
}
.taskCheckbox:checked ~ .box {
  @apply bg-primary border-primary dark:border-primary;
}

.custom-input-date::-webkit-calendar-picker-indicator {
  background-position: center;
  background-repeat: no-repeat;
  background-size: 20px;
}
.custom-input-date-1::-webkit-calendar-picker-indicator {
  background-image: url(./images/icon/icon-calendar.svg);
}
.custom-input-date-2::-webkit-calendar-picker-indicator {
  background-image: url(./images/icon/icon-arrow-down.svg);
}

[x-cloak] {
  display: none !important;
}

/* Light-mode readability overrides within the app shell */
html:not(.dark) .app-shell {
  /* Ensure a true light background & dark text base */
  background-color: #f3f7fd; /* soft app canvas */
  color: #0f172a; /* slate-900 */
}

/* Keep gradients for cards; do not override .bg-gradient-to-br globally */

/* Make text-white readable on light backgrounds */
html:not(.dark) .app-shell .text-white {
  color: #0f172a !important; /* slate-900 */
}

/* Glass panels and subtle borders should be solid/light in light mode */
html:not(.dark) .app-shell .bg-white\/10,
html:not(.dark) .app-shell .bg-white\/5 {
  background-color: #e9eef5 !important; /* card/section surface */
}
/* Page sub-headers should be transparent in light mode */
html:not(.dark) .app-shell header.bg-black\/20 {
  background-color: transparent !important;
  border-color: transparent !important;
  -webkit-backdrop-filter: none !important;
  backdrop-filter: none !important;
}
html:not(.dark) .app-shell .border-white\/10,
html:not(.dark) .app-shell .border-white\/20 {
  border-color: #e5e7eb !important; /* gray-200 */
}

/* Inputs/buttons using translucent whites become proper light UI */
html:not(.dark) .app-shell .hover\:bg-white\/10:hover,
html:not(.dark) .app-shell .hover\:bg-white\/20:hover {
  background-color: #dde6f1 !important; /* subtle hover */
}

/* Muted text colors for light mode */
html:not(.dark) .app-shell .text-gray-300 {
  color: #475569 !important; /* slate-600 */
}
html:not(.dark) .app-shell .text-gray-400 {
  color: #64748b !important; /* slate-500 */
}

/* Keep number badges readable when they relied on white text */
html:not(.dark) .app-shell .text-white.bg-white,
html:not(.dark) .app-shell .text-white.bg-gray-50 {
  color: #111827 !important;
}
